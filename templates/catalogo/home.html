{% extends 'base.html' %}

{% block content %}
<!-- Particles Container (covers Hero + Features) -->
<div class="relative">
    <canvas id="particles-canvas" class="absolute inset-0 w-full h-full z-0 pointer-events-none"></canvas>
    
    <!-- Hero Section -->
    <section class="relative bg-gradient-to-b from-white via-pink-50/30 to-transparent py-20 animate-fade-in overflow-visible">
        <div class="container mx-auto px-4 text-center animate-fade-in-up relative z-10">
            <h1 class="text-4xl md:text-6xl font-serif font-bold text-dym-dark mb-4 drop-shadow-sm">Cosmética Capilar Profesional</h1>
            <p class="text-lg md:text-xl text-gray-600 mb-8 max-w-2xl mx-auto">Descubri las mejores marcas para el cuidado de tu cabello. Calidad de salon en tu hogar.</p>
            <div class="flex flex-col md:flex-row gap-4 justify-center">
                <a href="{% url 'catalogo:producto_list' %}" class="bg-gradient-to-r from-dym-accent to-pink-400 text-white px-8 py-3 rounded-full font-medium hover:from-pink-400 hover:to-dym-accent hover:scale-105 transition-all duration-300 transform shadow-lg hover:shadow-xl">Ver Productos</a>
                {% if site_config.whatsapp_number %}
                <a href="https://wa.me/{{ site_config.whatsapp_number }}" target="_blank" class="bg-gradient-to-r from-green-500 to-green-600 text-white px-8 py-3 rounded-full font-medium hover:from-green-600 hover:to-green-700 hover:scale-105 transition-all duration-300 transform shadow-lg hover:shadow-xl flex items-center justify-center gap-2"><span>Escribinos por WhatsApp</span></a>
                {% endif %}
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="relative py-12 bg-gradient-to-b from-transparent to-white z-10">
        <div class="container mx-auto px-4 grid md:grid-cols-3 gap-8 text-center">
            <div class="p-6 hover:translate-y-[-5px] transition duration-300 bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm">
                <div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-dym-accent/20 to-pink-100">
                    <svg class="w-6 h-6 text-dym-accent" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                </div>
                <h3 class="font-bold text-xl mb-2">Productos Profesionales</h3>
                <p class="text-gray-500">Seleccionamos las mejores marcas del mercado para garantizar resultados.</p>
            </div>
            <div class="p-6 hover:translate-y-[-5px] transition duration-300 bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm">
                <div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-dym-accent/20 to-pink-100">
                    <svg class="w-6 h-6 text-dym-accent" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path>
                    </svg>
                </div>
                <h3 class="font-bold text-xl mb-2">Asesoramiento Personalizado</h3>
                <p class="text-gray-500">Te ayudamos a elegir el tratamiento ideal para tu tipo de cabello.</p>
            </div>
            <div class="p-6 hover:translate-y-[-5px] transition duration-300 bg-white/80 backdrop-blur-sm rounded-2xl shadow-sm">
                <div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-dym-accent/20 to-pink-100">
                    <svg class="w-6 h-6 text-dym-accent" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"></path>
                    </svg>
                </div>
                <h3 class="font-bold text-xl mb-2">Envíos a todo el país</h3>
                <p class="text-gray-500">Compra seguro a través de Mercado Libre y recibilo en tu casa.</p>
            </div>
        </div>
    </section>
</div>

<!-- Featured Brands -->
{% if marcas %}
<section class="py-16 bg-gradient-to-b from-white via-pink-50/20 to-white relative overflow-hidden">
    <!-- Decorative elements -->
    <div class="absolute top-0 left-0 w-72 h-72 bg-pink-100 rounded-full filter blur-3xl opacity-30 -translate-x-1/2 -translate-y-1/2"></div>
    <div class="absolute bottom-0 right-0 w-96 h-96 bg-pink-100 rounded-full filter blur-3xl opacity-30 translate-x-1/2 translate-y-1/2"></div>
    
    <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-12">
            <span class="text-dym-accent font-semibold text-sm uppercase tracking-widest">Calidad garantizada</span>
            <h2 class="text-4xl font-serif font-bold mt-2 bg-gradient-to-r from-gray-800 via-dym-accent to-pink-400 bg-clip-text text-transparent">Trabajamos con las Mejores Marcas</h2>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 items-center">
            {% for marca in marcas %}
            <a href="{% url 'catalogo:marca_detail' marca.slug %}" class="group">
                <div class="rounded-xl p-[2px] bg-gradient-to-br from-transparent via-pink-100 to-transparent hover:from-dym-accent hover:via-pink-300 hover:to-pink-200 transition-all duration-500">
                    <div class="bg-white rounded-xl p-4 h-32 flex items-center justify-center group-hover:shadow-xl transition-all duration-300">
                        {% if marca.logo %}
                        <img src="{{ marca.logo.url }}" alt="{{ marca.nombre }}" class="max-h-full max-w-full object-contain filter grayscale group-hover:grayscale-0 transition duration-500 group-hover:scale-110">
                        {% else %}
                        <span class="font-bold text-gray-400 group-hover:text-dym-accent transition-all duration-300 text-lg">{{ marca.nombre }}</span>
                        {% endif %}
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        <div class="text-center mt-12">
            <a href="{% url 'catalogo:marca_list' %}" class="inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-dym-accent to-pink-400 text-white rounded-full font-semibold hover:from-pink-400 hover:to-dym-accent hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl">
                Ver todas las marcas
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Featured Products -->
{% if productos_destacados %}
<section class="py-16 relative overflow-hidden">
    <!-- Decorative elements -->
    <div class="absolute top-1/2 left-0 w-64 h-64 bg-pink-100 rounded-full filter blur-3xl opacity-20 -translate-x-1/2"></div>
    <div class="absolute top-1/4 right-0 w-80 h-80 bg-pink-100 rounded-full filter blur-3xl opacity-20 translate-x-1/2"></div>
    
    <div class="container mx-auto px-4 relative z-10">
        <div class="text-center mb-12">
            <span class="text-dym-accent font-semibold text-sm uppercase tracking-widest">Lo más vendido</span>
            <h2 class="text-4xl font-serif font-bold mt-2 bg-gradient-to-r from-gray-800 via-dym-accent to-pink-400 bg-clip-text text-transparent">Productos Destacados</h2>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            {% for producto in productos_destacados %}
            <div class="rounded-xl p-[2px] bg-gradient-to-br from-dym-accent via-pink-300 to-pink-200 hover:from-pink-400 hover:via-dym-accent hover:to-pink-300 transition-all duration-500 shadow-lg hover:shadow-2xl group hover:-translate-y-3">
                <div class="bg-white rounded-xl overflow-hidden h-full flex flex-col">
                    <div class="relative aspect-square overflow-hidden bg-gray-50">
                        {% if producto.imagen_principal %}
                        <img src="{{ producto.imagen_principal.url }}" alt="{{ producto.nombre }}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700 ease-out">
                        {% else %}
                        <div class="w-full h-full flex items-center justify-center text-gray-300 bg-gradient-to-br from-gray-100 to-gray-50">
                            <svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24"><path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>
                        </div>
                        {% endif %}
                        <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition duration-500 flex items-end justify-center pb-6">
                            <span class="bg-white/95 backdrop-blur-sm text-dym-dark px-5 py-2.5 rounded-full font-bold text-sm shadow-xl transform translate-y-4 group-hover:translate-y-0 transition duration-300">Ver Detalles</span>
                        </div>
                    </div>
                    <div class="p-6 flex-grow flex flex-col">
                        <p class="text-xs text-dym-accent font-bold uppercase tracking-wider mb-1">{{ producto.marca.nombre }}</p>
                        <h3 class="font-bold text-lg mb-2 text-gray-800 group-hover:text-dym-accent transition-colors duration-300">{{ producto.nombre }}</h3>
                        <p class="text-sm text-gray-500 line-clamp-2 mb-4">{{ producto.descripcion_corta }}</p>
                        <div class="mt-auto">
                            <a href="{% url 'catalogo:producto_detail' producto.slug %}" class="block w-full text-center bg-gradient-to-r from-gray-800 to-gray-700 text-white py-3 rounded-xl hover:from-dym-accent hover:to-pink-400 transition-all duration-300 text-sm font-semibold shadow-sm hover:shadow-md">
                                Ver Producto
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<script>
document.addEventListener('DOMContentLoaded', function () {
    const canvas = document.getElementById('particles-canvas');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    let width, height;
    const particles = [];
    const particleCount = 60;
    
    // Colores rosa con diferentes tonalidades
    const colors = [
        { r: 216, g: 167, b: 177 }, // dym-accent
        { r: 244, g: 114, b: 182 }, // pink-400
        { r: 251, g: 207, b: 232 }, // pink-200
        { r: 249, g: 168, b: 212 }, // pink-300
    ];
    
    function resize() {
        width = canvas.width = canvas.parentElement.offsetWidth;
        height = canvas.height = canvas.parentElement.offsetHeight;
    }
    window.addEventListener('resize', resize);
    resize();
    
    class Particle {
        constructor() {
            this.reset();
            this.y = Math.random() * height;
        }
        reset() {
            this.x = Math.random() * width;
            this.y = -30;
            this.size = Math.random() * 8 + 6;
            this.speedX = Math.random() * 0.6 - 0.3;
            this.speedY = Math.random() * 1.0 + 0.4;
            this.colorIndex = Math.floor(Math.random() * colors.length);
            this.alpha = Math.random() * 0.4 + 0.5;
            this.pulseSpeed = Math.random() * 0.03 + 0.015;
            this.pulsePhase = Math.random() * Math.PI * 2;
            this.glowSize = this.size * 4;
        }
        update() {
            this.x += this.speedX;
            this.y += this.speedY;
            this.pulsePhase += this.pulseSpeed;
            
            // Reset when out of bounds
            if (this.y > height + 20) {
                this.reset();
            }
            if (this.x > width + 20) this.x = -20;
            if (this.x < -20) this.x = width + 20;
        }
        draw() {
            const pulseFactor = 0.5 + Math.sin(this.pulsePhase) * 0.3;
            const currentAlpha = this.alpha * pulseFactor;
            const color = colors[this.colorIndex];
            
            // Outer glow
            const gradient = ctx.createRadialGradient(
                this.x, this.y, 0,
                this.x, this.y, this.glowSize
            );
            gradient.addColorStop(0, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentAlpha * 0.8})`);
            gradient.addColorStop(0.4, `rgba(${color.r}, ${color.g}, ${color.b}, ${currentAlpha * 0.3})`);
            gradient.addColorStop(1, `rgba(${color.r}, ${color.g}, ${color.b}, 0)`);
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.glowSize, 0, Math.PI * 2);
            ctx.fill();
            
            // Inner bright core
            ctx.globalAlpha = currentAlpha;
            ctx.fillStyle = `rgba(255, 255, 255, 0.9)`;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size * 0.3, 0, Math.PI * 2);
            ctx.fill();
            ctx.globalAlpha = 1;
        }
    }
    
    for (let i = 0; i < particleCount; i++) {
        particles.push(new Particle());
    }
    
    function animate() {
        ctx.clearRect(0, 0, width, height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }
    animate();
});
</script>
{% endblock %}