{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<section class="relative bg-gradient-to-r from-gray-50 to-white py-20 animate-fade-in overflow-hidden">
    <canvas id="particles-canvas" class="absolute inset-0 w-full h-full z-0 opacity-40 pointer-events-none"></canvas>
    <div class="container mx-auto px-4 text-center animate-fade-in-up relative z-10">
        <h1 class="text-4xl md:text-6xl font-serif font-bold text-dym-dark mb-4 drop-shadow-sm">Cosmetica Capilar Profesional</h1>
        <p class="text-lg md:text-xl text-gray-600 mb-8 max-w-2xl mx-auto">Descubri las mejores marcas para el cuidado de tu cabello. Calidad de salon en tu hogar.</p>
        <div class="flex flex-col md:flex-row gap-4 justify-center">
            <a href="{% url 'catalogo:producto_list' %}" class="bg-dym-dark text-white px-8 py-3 rounded-full font-medium hover:bg-gray-800 hover:scale-105 transition transform shadow-lg">Ver Productos</a>
            {% if site_config.whatsapp_number %}
            <a href="https://wa.me/{{ site_config.whatsapp_number }}" target="_blank" class="bg-green-500 text-white px-8 py-3 rounded-full font-medium hover:bg-green-600 hover:scale-105 transition transform shadow-lg flex items-center justify-center gap-2"><span>Escribinos por WhatsApp</span></a>
            {% endif %}
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-12 bg-white">
    <div class="container mx-auto px-4 grid md:grid-cols-3 gap-8 text-center">
        <div class="p-6 hover:translate-y-[-5px] transition duration-300">
            <div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-dym-accent/20 to-pink-100">
                <svg class="w-6 h-6 text-dym-accent" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                </svg>
            </div>
            <h3 class="font-bold text-xl mb-2">Productos Profesionales</h3>
            <p class="text-gray-500">Seleccionamos las mejores marcas del mercado para garantizar resultados.</p>
        </div>
        <div class="p-6 hover:translate-y-[-5px] transition duration-300">
            <div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-dym-accent/20 to-pink-100">
                <svg class="w-6 h-6 text-dym-accent" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path>
                </svg>
            </div>
            <h3 class="font-bold text-xl mb-2">Asesoramiento Personalizado</h3>
            <p class="text-gray-500">Te ayudamos a elegir el tratamiento ideal para tu tipo de cabello.</p>
        </div>
        <div class="p-6 hover:translate-y-[-5px] transition duration-300">
            <div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-dym-accent/20 to-pink-100">
                <svg class="w-6 h-6 text-dym-accent" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"></path>
                </svg>
            </div>
            <h3 class="font-bold text-xl mb-2">Envios a todo el pais</h3>
            <p class="text-gray-500">Compra seguro a traves de Mercado Libre y recibilo en tu casa.</p>
        </div>
    </div>
</section>

<!-- Featured Brands -->
{% if marcas %}
<section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
        <h2 class="text-3xl font-serif font-bold text-center mb-12">Nuestras Marcas</h2>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8 items-center">
            {% for marca in marcas %}
            <a href="{% url 'catalogo:marca_detail' marca.slug %}" class="group text-center">
                <div class="bg-white rounded-xl shadow-sm p-4 h-32 flex items-center justify-center group-hover:shadow-lg group-hover:-translate-y-1 transition duration-300 border border-transparent hover:border-dym-accent">
                    {% if marca.logo %}
                    <img src="{{ marca.logo.url }}" alt="{{ marca.nombre }}" class="max-h-full max-w-full object-contain filter grayscale group-hover:grayscale-0 transition duration-300">
                    {% else %}
                    <span class="font-bold text-gray-400 group-hover:text-gray-600 transition">{{ marca.nombre }}</span>
                    {% endif %}
                </div>
            </a>
            {% endfor %}
        </div>
        <div class="text-center mt-10">
            <a href="{% url 'catalogo:marca_list' %}" class="text-dym-accent font-bold hover:underline">Ver todas las marcas â†’</a>
        </div>
    </div>
</section>
{% endif %}

<!-- Featured Products -->
{% if productos_destacados %}
<section class="py-16 container mx-auto px-4">
    <h2 class="text-3xl font-serif font-bold text-center mb-12">Productos Destacados</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
        {% for producto in productos_destacados %}
        <div class="rounded-lg p-[1px] bg-gradient-to-br from-dym-accent to-pink-200 hover:from-pink-400 hover:to-dym-accent transition-all duration-500 shadow-sm hover:shadow-xl group hover:-translate-y-2">
            <div class="bg-white rounded-lg overflow-hidden h-full flex flex-col">
                <div class="relative aspect-square overflow-hidden bg-gray-50">
                    {% if producto.imagen_principal %}
                    <img src="{{ producto.imagen_principal.url }}" alt="{{ producto.nombre }}" class="w-full h-full object-cover group-hover:scale-110 transition duration-700 ease-in-out">
                    {% else %}
                    <div class="w-full h-full flex items-center justify-center text-gray-400">Sin Imagen</div>
                    {% endif %}
                    <div class="absolute inset-0 bg-black bg-opacity-10 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center">
                        <span class="bg-white text-dym-dark px-4 py-2 rounded-full font-bold text-sm shadow-lg transform scale-90 group-hover:scale-100 transition">Ver Detalles</span>
                    </div>
                </div>
                <div class="p-6 flex-grow flex flex-col">
                    <p class="text-xs text-dym-accent font-bold uppercase tracking-wide mb-1">{{ producto.marca.nombre }}</p>
                    <h3 class="font-bold text-lg mb-2 text-gray-800">{{ producto.nombre }}</h3>
                    <p class="text-sm text-gray-500 line-clamp-2 mb-4">{{ producto.descripcion_corta }}</p>
                    <div class="mt-auto flex flex-col gap-2">
                        <a href="{% url 'catalogo:producto_detail' producto.slug %}" class="block w-full text-center border border-dym-dark text-dym-dark py-2 rounded hover:bg-dym-dark hover:text-white transition text-sm font-medium">Ver Detalles</a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

<script>
document.addEventListener('DOMContentLoaded', function () {
    const canvas = document.getElementById('particles-canvas');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    let width, height;
    const particles = [];
    const particleCount = 50;
    function resize() {
        width = canvas.width = canvas.parentElement.offsetWidth;
        height = canvas.height = canvas.parentElement.offsetHeight;
    }
    window.addEventListener('resize', resize);
    resize();
    class Particle {
        constructor() {
            this.x = Math.random() * width;
            this.y = Math.random() * height;
            this.size = Math.random() * 4 + 2;
            this.speedX = Math.random() * 0.5 - 0.25;
            this.speedY = Math.random() * 0.5 - 0.25;
            this.color = '#D8A7B1';
            this.alpha = Math.random() * 0.6 + 0.3;
        }
        update() {
            this.x += this.speedX;
            this.y += this.speedY;
            if (this.x > width) this.x = 0;
            if (this.x < 0) this.x = width;
            if (this.y > height) this.y = 0;
            if (this.y < 0) this.y = height;
        }
        draw() {
            ctx.globalAlpha = this.alpha;
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
        }
    }
    for (let i = 0; i < particleCount; i++) {
        particles.push(new Particle());
    }
    function animate() {
        ctx.clearRect(0, 0, width, height);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }
    animate();
});
</script>
{% endblock %}